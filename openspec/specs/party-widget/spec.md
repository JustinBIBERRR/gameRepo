# party-widget Specification

## Purpose
TBD - created by archiving change refactor-global-party-widget. Update Purpose after archive.
## Requirements
### Requirement: 全局右下角圆形图标与弧形子入口
系统 SHALL 在所有页面右下角固定显示一个圆形主图标；用户 hover 主图标时，以弧形（或滚轮式）在主图标周围展示多个子图标；子图标至少包含「奖惩」与「抽人」两个入口；点击子图标触发对应的抽奖流程。

#### Scenario: 主图标与弧形展开
- **WHEN** 用户在任何页面查看右下角
- **THEN** 显示一个圆形主图标
- **AND** 用户 hover 主图标时，子图标以弧形环绕方式出现在主图标周围
- **AND** 子图标至少包含「奖惩」「抽人」两个入口

#### Scenario: 点击子图标触发流程
- **WHEN** 用户点击「抽人」或「奖惩」子图标
- **THEN** 打开全局蒙版并进入对应抽奖流程（抽人 或 奖惩）
- **AND** 蒙版内展示卡牌动效与选择交互

#### Scenario: 移动端或触摸设备
- **WHEN** 用户在无 hover 能力的设备上使用
- **THEN** 可通过点击主图标展开或收起子图标
- **AND** 点击子图标后行为与桌面端一致

### Requirement: 抽人/奖惩蒙版与卡牌动效
系统 SHALL 在用户触发「抽人」或「奖惩」时，展示全局蒙版；蒙版内实现多张卡片飞速轮播后定格 3 张，用户点击选择其中一张后三张同时翻开展示内容，被选中的卡牌高亮并浮动强调；蒙版右上角提供关闭控件（叉号）。

#### Scenario: 抽人流程（名单至少 3 条，3 人不重复）
- **WHEN** 用户点击「抽人」子图标且人员名单已配置至少 3 条
- **THEN** 全局出现蒙版，右上角显示关闭叉号
- **AND** 系统从人员名单中无放回随机抽取 3 人，多张卡片飞速轮播后定格该 3 张卡片
- **AND** 用户点击选择其中一张后，三张卡片同时翻开，卡片中间展示人物名字
- **AND** 被选中的那张卡牌高亮并浮动强调

#### Scenario: 抽人时名单不足 3 条
- **WHEN** 用户点击「抽人」子图标且人员名单不足 3 条（或未配置）
- **THEN** 不打开蒙版
- **AND** 提示用户「请先在设置中配置至少 3 条人员」

#### Scenario: 奖惩流程（条目至少 3 条，3 条不重复）
- **WHEN** 用户点击「奖惩」子图标且奖惩条目已配置至少 3 条
- **THEN** 全局出现蒙版，右上角显示关闭叉号
- **AND** 系统从奖惩列表中无放回随机抽取 3 条，多张卡片飞速轮播后定格该 3 张卡片
- **AND** 用户点击选择其中一张后，三张卡片同时翻开，卡片中间展示「奖励」或「惩罚」及对应配置的文字内容
- **AND** 被选中的那张卡牌高亮并浮动强调

#### Scenario: 奖惩时条目不足 3 条
- **WHEN** 用户点击「奖惩」子图标且奖惩条目不足 3 条（或未配置）
- **THEN** 不打开蒙版
- **AND** 提示用户「请先在设置中配置至少 3 条奖惩」

#### Scenario: 关闭蒙版
- **WHEN** 用户点击蒙版右上角关闭叉号
- **THEN** 蒙版关闭，退出当前抽奖流程
- **AND** 页面恢复为蒙版打开前的状态

#### Scenario: 选完后不自动关闭、无再来一次
- **WHEN** 用户已选择一张卡牌并完成高亮展示
- **THEN** 蒙版保持打开，不自动关闭
- **AND** 仅通过点击右上角叉号关闭蒙版
- **AND** 蒙版内不提供「再来一次」按钮；需要再抽时先关闭蒙版再点浮动入口

#### Scenario: 动效实现
- **WHEN** 实现卡牌轮播、翻牌与高亮动效
- **THEN** 使用业界成熟动效库（推荐 GSAP，可选 Lottie 作为装饰或补充）
- **AND** 轮播、翻牌、高亮与浮动的时序与交互由实现保证可维护与可扩展

