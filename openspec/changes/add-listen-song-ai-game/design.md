## Context
- 平台希望新增轻量的音乐猜测玩法，核心体验是让 AI 朗读黄金歌词，玩家根据朗读内容猜歌名。
- 朗读需可配置语种（含粤语、日语等）、语速、音调，以便营造不同难度与趣味。
- 揭晓阶段需播放预设的原曲高光片段（5-10 秒），用于烘托氛围。
- 需沿用现有设置后台的 Schema 驱动数据管理模式，支持管理员快速录入歌曲数据。

## Goals / Non-Goals
- Goals:
  - 为前台提供完整的朗读→猜测→揭晓流程，包含提示与重播控制。
  - 封装 Web Speech API 的使用，提供能力检测、状态管理与用户操作反馈。
  - 在设置后台提供歌曲数据 Schema，支持音频片段资源的上传/替换。
  - 输出至少 3 条示例歌曲，覆盖不同语种/难度组合。
- Non-Goals:
  - 不实现服务端合成或外部 TTS 服务调用，全部基于浏览器语音合成。
  - 不做多人同步或实时排行，本轮聚焦单机体验。

## Decisions
- 使用原生 `SpeechSynthesisUtterance` 与 `speechSynthesis` 队列控制，封装为组合式函数 `useSpeechReader`，提供 `play`, `stop`, `availableVoices` 等接口。
- 语种(`lang`)、语速(`rate`)、音调(`pitch`) 取自歌曲配置；若浏览器缺少对应 voice，则 fallback 至默认中文普通话并提示管理员。
- 朗读文本使用配置字段 `lyrics`，允许包含换行；朗读前进行前后空白清洗并限制长度（<= 200 字符）以避免过长单次朗读。
- 猜测逻辑沿用现有猜测游戏的模式：用户输入答案，系统按忽略大小写与标点的模糊规则比对；失败时可再次朗读。
- 揭晓音频 `audioClip` 采用 File 上传并存储在 IndexedDB，加载时生成 Blob URL；若缺失则降级为仅显示答案。
- 提示 `hints` 定义为字符串数组，前台以逐条展开方式呈现，默认首条立即可见，其余可点击“更多提示”依次揭示。

## Risks / Trade-offs
- 浏览器语音合成语种支持差异大：通过初次加载时的 voice 检测，缺少目标语种时需提示管理员改用默认语种；若必须特定语种，则建议准备预录音频（可后续扩展）。
- 音频文件体积过大影响加载：限制上传大小（建议 <5MB），超过阈值时阻止保存并提示压缩处理。
- 同时播放朗读与揭晓音频的冲突：朗读开始前需停止正在播放的音频片段，反之亦然，保证不会重叠。

## Migration Plan
1. 引入新的游戏路由与页面骨架，集成到首页卡片与导航。
2. 实现 `useSpeechReader` 组合式函数，并在游戏页面联动输入表单、提示组件和揭晓逻辑。
3. 扩展设置后台 Schema，支持歌曲数据 CRUD 与音频上传，复用现有 DataManager 的文件存储机制。
4. 添加示例数据与本地化文案，验证在桌面端与移动端的交互表现。
5. 手动测试：不同语种、禁用语音合成（模拟不支持环境）、大文件上传防护、耳机/外放播放体验。

## Open Questions
- 是否需要支持一轮内多首歌词（如 3 题循环）？当前按单首一轮实现，后续可扩展为题池模式。
- 揭晓音频是管理员上传的本地文件，还是指向线上 URL？本提案默认使用本地文件+IndexedDB 存储，如需 URL 需追加白名单与缓存策略。
